{"name": "pregnancy_conditions.nlpql", "content": "\n// Phenotype library name\nphenotype \" - pregnancy conditions\" version \"1\";\n\n// # Referenced libraries #\ninclude ClarityCore version \"1.0\" called Clarity;\n\n// Termsets\n\ntermset mg_hosp_yn_terms_terms: [\n    \"hospitalized\", \"hospitalization\"\n];\n\n\n\n\ntermset mg_pregcon_eclamphtn_terms_terms: [\n    \"hypertension\", \"pregnancy induced hypertension\", \"pre-eclampsia\"\n];\n\n\n\n\ntermset mg_pregcon_iugr_terms_terms: [\n    \"intrauterine growth restriction\", \"iugr\"\n];\n\n\n\n\ntermset mg_pregcon_diabetes_terms_terms: [\n    \"gestational diabetes\"\n];\n\n\n\n// Data Entities\n\ndefine final mg_pregcon_iugr_sct:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_pregcon_iugr_sct_concepts\": Concept {\n            Code '22033007' from \"SNOMED\"\n        }\n\n\n\n\n       define \"mg_pregcon_iugr_sct\": \n            \t [Condition: Code in \"mg_pregcon_iugr_sct_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_pregcon_diabetes_terms:\n    Clarity.ProviderAssertion({\n      termset: [mg_pregcon_diabetes_terms_terms]\n    });\n                    \n\n\n\ndefine final mg_pregcon_iugr_icd:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_pregcon_iugr_icd_concepts\": Concept {\n            Code 'Z87.59' from \"ICD10\"\n        }\n\n\n\n\n       define \"mg_pregcon_iugr_icd\": \n            \t [Condition: Code in \"mg_pregcon_iugr_icd_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_pregcon_eclamphtn_sct:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_pregcon_eclamphtn_sct_concepts\": Concept {\n            Code '48194001' from \"SNOMED\", \n            Code '398254007' from \"SNOMED\", \n            Code '41114007' from \"SNOMED\", \n            Code '67359005' from \"SNOMED\", \n            Code '46764007' from \"SNOMED\"\n        }\n\n\n\n\n       define \"mg_pregcon_eclamphtn_sct\": \n            \t [Condition: Code in \"mg_pregcon_eclamphtn_sct_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_pregcon_iugr_terms:\n    Clarity.ProviderAssertion({\n      termset: [mg_pregcon_iugr_terms_terms]\n    });\n                    \n\n\n\ndefine final mg_pregcon_eclamphtn_terms:\n    Clarity.ProviderAssertion({\n      termset: [mg_pregcon_eclamphtn_terms_terms]\n    });\n                    \n\n\n\ndefine final mg_pregcon_eclamphtn_icd:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_pregcon_eclamphtn_icd_concepts\": Concept {\n            Code 'O11' from \"ICD10\"\n        }\n\n\n\n\n       define \"mg_pregcon_eclamphtn_icd\": \n            \t [Condition: Code in \"mg_pregcon_eclamphtn_icd_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_hosp_yn:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n\n\n       define \"mg_hosp_yn\": \n            [Encounter]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_death_dx:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_death_dx_concepts\": Concept {\n            Code '16100001' from \"SNOMED\"\n        }\n\n\n\n\n       define \"mg_death_dx\": \n            \t [Observation: Code in \"mg_death_dx_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_pregcon_diabetes:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_pregcon_diabetes_concepts\": Concept {\n            Code 'SNOMED' from \"SNOMED\"\n        }\n\n\n\n\n       define \"mg_pregcon_diabetes\": \n            2.16.840.1.113762.1.4.1032.89\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_death:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_death_concepts\": Concept {\n            Code '237360006' from \"SNOMED\", \n            Code '27792001' from \"SNOMED\", \n            Code '288260005' from \"SNOMED\", \n            Code '31868001' from \"SNOMED\", \n            Code '370912008' from \"SNOMED\", \n            Code '5866003' from \"SNOMED\", \n            Code '59283008' from \"SNOMED\", \n            Code '698714004' from \"SNOMED\", \n            Code '237358009' from \"SNOMED\", \n            Code '698715003' from \"SNOMED\"\n        }\n\n\n\n\n       define \"mg_death\": \n            \t [Observation: Code in \"mg_death_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_hosp_yn_terms:\n    Clarity.ProviderAssertion({\n      termset: [mg_hosp_yn_terms_terms]\n    });\n                    \n\n\n\ndefine final mg_death_dt:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_death_dt_concepts\": Concept {\n            Code '81956-5' from \"LOINC\"\n        }\n\n\n\n\n       define \"mg_death_dt\": \n            \t [Observation: Code in \"mg_death_dt_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_hospadm_dt:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n\n\n       define \"mg_hospadm_dt\": \n            [Encounter]\n\n\n\n             \"\"\"\n    });\n\n\n// Operations\n\n\n\n"}