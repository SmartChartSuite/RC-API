{"name": "measurements.nlpql", "content": "\n// Phenotype library name\nphenotype \" - measurements\" version \"1\";\n\n// # Referenced libraries #\ninclude ClarityCore version \"1.0\" called Clarity;\n\n// Termsets\n\ntermset mg_ht_value_terms: [\n    \"height\", \"cm\", \"cm tall\"\n];\n\n\n\n\ntermset mg_ppwt_value_terms: [\n    \"kg\", \"weight\"\n];\n\n\n\n\ntermset mg_dewt_value_terms: [\n    \"weight at delivery\"\n];\n\n\n\n// Data Entities\n\ndefine final mg_ppwt_value:\n    Clarity.ValueExtraction({\n                 termset: [mg_ppwt_value_terms]\n                 , minimum_value: \"30\"\n                 , maximum_value: \"300\"});\n                               \n\n\n\ndefine final mg_ht_value:\n    Clarity.ValueExtraction({\n                 termset: [mg_ht_value_terms]\n                 , minimum_value: \"100\"\n                 , maximum_value: \"200\"});\n                               \n\n\n\ndefine final mg_ht_loinc:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_ht_loinc_concepts\": Concept {\n            Code '8302-2' from \"LOINC\", \n            Code '8301-4' from \"LOINC\", \n            Code '3137-7' from \"LOINC\", \n            Code '83846-6' from \"LOINC\"\n        }\n\n\n\n\n       define \"mg_ht_loinc\": \n            \t [Observation: Code in \"mg_ht_loinc_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_ppwt_loinc:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_ppwt_loinc_concepts\": Concept {\n            Code '8348-5' from \"LOINC\", \n            Code '69460-4' from \"LOINC\", \n            Code '56077-1' from \"LOINC\", \n            Code '8338-6' from \"LOINC\"\n        }\n\n\n\n\n       define \"mg_ppwt_loinc\": \n            \t [Observation: Code in \"mg_ppwt_loinc_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_dewt:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_dewt_concepts\": Concept {\n            Code '8345-1' from \"LOINC\"\n        }\n\n\n\n\n       define \"mg_dewt\": \n            \t [Observation: Code in \"mg_dewt_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_dewt_value:\n    Clarity.ValueExtraction({\n                 termset: [mg_dewt_value_terms]\n                 , minimum_value: \"30\"\n                 , maximum_value: \"300\"});\n                               \n\n\n\ndefine final mg_ht_sct:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_ht_sct_concepts\": Concept {\n            Code '365714001' from \"SNOMED\", \n            Code '248327000' from \"SNOMED\"\n        }\n\n\n\n\n       define \"mg_ht_sct\": \n            \t [Observation: Code in \"mg_ht_sct_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_ppwt_sct:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_ppwt_sct_concepts\": Concept {\n            Code '27113001' from \"SNOMED\"\n        }\n\n\n\n\n       define \"mg_ppwt_sct\": \n            \t [Observation: Code in \"mg_ppwt_sct_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n// Operations\n\n\n\n"}