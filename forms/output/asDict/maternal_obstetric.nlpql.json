{"name": "maternal_obstetric.nlpql", "content": "\n// Phenotype library name\nphenotype \" - maternal obstetric\" version \"1\";\n\n// # Referenced libraries #\ninclude ClarityCore version \"1.0\" called Clarity;\n\n// Termsets\n\ntermset mg_lmp_terms_terms: [\n    \"last menses\", \"last menstrual period\", \"last period\"\n];\n\n\n\n// Data Entities\n\ndefine final mg_lmp_loinc:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_lmp_loinc_concepts\": Concept {\n            Code '8665-2' from \"LOINC\"\n        }\n\n\n\n\n       define \"mg_lmp_loinc\": \n            \t [Observation: Code in \"mg_lmp_loinc_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_gravidity:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_gravidity_concepts\": Concept {\n            Code '12157-4' from \"LOINC\"\n        }\n\n\n\n\n       define \"mg_gravidity\": \n            \t [Observation: Code in \"mg_gravidity_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_pn_sct:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_pn_sct_concepts\": Concept {\n            Code '424525001' from \"SNOMED\"\n        }\n\n\n\n\n       define \"mg_pn_sct\": \n            \t [Encounter: Code in \"mg_pn_sct_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_edd_loinc:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_edd_loinc_concepts\": Concept {\n            Code '11778-8' from \"LOINC\", \n            Code '53691-0' from \"LOINC\", \n            Code '11780-4' from \"LOINC\", \n            Code '57063-0' from \"LOINC\", \n            Code '90368-2' from \"LOINC\", \n            Code '11779-6' from \"LOINC\", \n            Code '57064-8' from \"LOINC\", \n            Code '53694-6' from \"LOINC\", \n            Code '11781-2' from \"LOINC\"\n        }\n\n\n\n\n       define \"mg_edd_loinc\": \n            \t [Observation: Code in \"mg_edd_loinc_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_pn_icd:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_pn_icd_concepts\": Concept {\n            Code 'Z36' from \"ICD10\"\n        }\n\n\n\n\n       define \"mg_pn_icd\": \n            \t [Encounter: Code in \"mg_pn_icd_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_parity_sct:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_parity_sct_concepts\": Concept {\n            Code '364325004' from \"SNOMED\", \n            Code '118212000' from \"SNOMED\"\n        }\n\n\n\n\n       define \"mg_parity_sct\": \n            \t [Observation: Code in \"mg_parity_sct_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_pn_dt_icd:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_pn_dt_icd_concepts\": Concept {\n            Code 'Z36' from \"ICD10\"\n        }\n\n\n\n\n       define \"mg_pn_dt_icd\": \n            \t [Encounter: Code in \"mg_pn_dt_icd_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_lmp_terms:\n    Clarity.ProviderAssertion({\n      termset: [mg_lmp_terms_terms]\n    });\n                    \n\n\n\ndefine final mg_pn_dt_sct:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_pn_dt_sct_concepts\": Concept {\n            Code '424525001' from \"SNOMED\"\n        }\n\n\n\n\n       define \"mg_pn_dt_sct\": \n            \t [Encounter: Code in \"mg_pn_dt_sct_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_parity_loinc:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_parity_loinc_concepts\": Concept {\n            Code '11977-6' from \"LOINC\"\n        }\n\n\n\n\n       define \"mg_parity_loinc\": \n            \t [Observation: Code in \"mg_parity_loinc_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_lmp_sct:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_lmp_sct_concepts\": Concept {\n            Code '21840007' from \"SNOMED\", \n            Code '161713000' from \"SNOMED\", \n            Code '248993009' from \"SNOMED\"\n        }\n\n\n\n\n       define \"mg_lmp_sct\": \n            \t [Observation: Code in \"mg_lmp_sct_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n\ndefine final mg_edd_sct:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mg_edd_sct_concepts\": Concept {\n            Code '161714006' from \"SNOMED\", \n            Code '289206005' from \"SNOMED\", \n            Code '738070007' from \"SNOMED\"\n        }\n\n\n\n\n       define \"mg_edd_sct\": \n            \t [Observation: Code in \"mg_edd_sct_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n// Operations\n\n\n\n"}