{"name": "occupational_exposure.nlpql", "content": "\n// Phenotype library name\nphenotype \" - occupational exposure\" version \"1\";\n\n// # Referenced libraries #\ninclude ClarityCore version \"1.0\" called Clarity;\n\n// Termsets\n\ntermset mv_occ_hc_terms_terms: [\n    \"healthcare worker\", \"health care worker\", \"health worker\"\n];\n\n\n\n// Data Entities\n\ndefine final mv_occ_hc_terms:\n    Clarity.ProviderAssertion({\n      termset: [mv_occ_hc_terms_terms]\n    });\n                    \n\n\n\ndefine final mv_occ_hc:\n    Clarity.CQLExecutionTask({\n        \"task_index\": 0,\n        cql: \"\"\"\n                \n        library Retrieve2 version '1.0'\n\n        using FHIR version '3.0.0'\n\n        include FHIRHelpers version '3.0.0' called FHIRHelpers\n\n        codesystem \"LOINC\": 'http://loinc.org'\n        codesystem \"SNOMED\": '2.16.840.1.113883.6.96'\n        codesystem \"RxNorm\": 'http://www.nlm.nih.gov/research/umls/rxnorm'\n        codesystem \"CPT\": 'http://www.ama-assn.org/go/cpt'\n        codesystem \"ICD9\": '2.16.840.1.113883.6.42'\n        codesystem \"ICD10\": '2.16.840.1.113883.6.3'\n        codesystem USCoreEthnicitySystem: '2.16.840.1.113883.6.238' \n        codesystem RelationshipType: '2.16.840.1.113883.4.642.3.449'\n\n        \n        \n\n        context Patient\n\n  \n\n\n        define \"mv_occ_hc_concepts\": Concept {\n            Code '11341-5' from \"LOINC\", \n            Code '85658-3' from \"LOINC\", \n            Code '85078-4' from \"LOINC\"\n        }\n\n\n\n\n       define \"mv_occ_hc\": \n            \t [Observation: Code in \"mv_occ_hc_concepts\"]\n\n\n\n             \"\"\"\n    });\n\n\n// Operations\n\n\n\n"}